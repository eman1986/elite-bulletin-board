/* 
jTable 2.3.1
http://www.jtable.org
Modified by Ed to remove some things I wasn't using and to add twitter bootstrap support.
---------------------------------------------------------------------------
Copyright (C) 2011-2013 by Halil Ä°brahim Kalkan (http://www.halilibrahimkalkan.com)

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.
*/
!function(a){var b;a(window).on("beforeunload",function(){b=!0}),a(window).on("unload",function(){b=!1}),a.widget("hik.jtable",{options:{actions:{},fields:{},animationsEnabled:!0,defaultDateFormat:"yy-mm-dd",dialogShowEffect:"fade",dialogHideEffect:"fade",showCloseButton:!1,loadingAnimationDelay:500,saveUserPreferences:!0,jqueryuiTheme:!1,ajaxSettings:{type:"POST",dataType:"json"},toolbar:{hoverAnimation:!0,hoverAnimationDuration:60,hoverAnimationEasing:void 0,items:[]},closeRequested:function(){},formCreated:function(){},formSubmitting:function(){},formClosed:function(){},loadingRecords:function(){},recordsLoaded:function(){},rowInserted:function(){},rowsRemoved:function(){},messages:{serverCommunicationError:"An error occured while communicating to the server.",loadingMessage:"Loading records...",noDataAvailable:"No data available!",cancel:"Cancel",error:"Error",close:"Close",cannotLoadOptionsFor:"Can not load options for field {0}"}},_$mainContainer:null,_$titleDiv:null,_$toolbarDiv:null,_$table:null,_$tableBody:null,_$tableRows:null,_$busyDiv:null,_$busyMessageDiv:null,_columnList:null,_fieldList:null,_keyField:null,_firstDataColumnOffset:0,_lastPostData:null,_cache:null,_create:function(){this._normalizeFieldsOptions(),this._initializeFields(),this._createFieldAndColumnList(),this._createMainContainer(),this._createTableTitle(),this._createToolBar(),this._createTable(),this._createBusyPanel(),this._addNoDataRow(),this._cookieKeyPrefix=this._generateCookieKeyPrefix()},_normalizeFieldsOptions:function(){var b=this;a.each(b.options.fields,function(a,c){b._normalizeFieldOptions(a,c)})},_normalizeFieldOptions:function(b,c){if(void 0==c.listClass&&(c.listClass=""),void 0==c.inputClass&&(c.inputClass=""),c.dependsOn&&"string"===a.type(c.dependsOn)){var d=c.dependsOn.split(",");c.dependsOn=[];for(var e=0;e<d.length;e++)c.dependsOn.push(a.trim(d[e]))}},_initializeFields:function(){this._lastPostData={},this._$tableRows=[],this._columnList=[],this._fieldList=[],this._cache=[]},_createFieldAndColumnList:function(){var b=this;a.each(b.options.fields,function(a,c){b._fieldList.push(a),1==c.key&&(b._keyField=a),0!=c.list&&"hidden"!=c.type&&b._columnList.push(a)})},_createMainContainer:function(){this._$mainContainer=a("<div />").addClass("jtable-main-container").appendTo(this.element),this._jqueryuiThemeAddClass(this._$mainContainer,"ui-widget")},_createTableTitle:function(){var b=this;if(b.options.title){var c=a("<div />").addClass("jtable-title").appendTo(b._$mainContainer);if(b._jqueryuiThemeAddClass(c,"ui-widget-header"),a("<div />").addClass("jtable-title-text").appendTo(c).append(b.options.title),b.options.showCloseButton){var d=a("<span />").html(b.options.messages.close);a("<button></button>").addClass("jtable-command-button jtable-close-button").attr("title",b.options.messages.close).append(d).appendTo(c).click(function(a){a.preventDefault(),a.stopPropagation(),b._onCloseRequested()})}b._$titleDiv=c}},_createTable:function(){this._$table=a("<table></table>").addClass("jtable").appendTo(this._$mainContainer),this.options.tableId&&this._$table.attr("id",this.options.tableId),this._jqueryuiThemeAddClass(this._$table,"ui-widget-content"),this._createTableHead(),this._createTableBody()},_createTableHead:function(){var b=a("<thead></thead>").appendTo(this._$table);this._addRowToTableHead(b)},_addRowToTableHead:function(b){var c=a("<tr></tr>").appendTo(b);this._addColumnsToHeaderRow(c)},_addColumnsToHeaderRow:function(a){for(var b=0;b<this._columnList.length;b++){var c=this._columnList[b],d=this._createHeaderCellForField(c,this.options.fields[c]);d.appendTo(a)}},_createHeaderCellForField:function(b,c){c.width=c.width||"10%";var d=a("<span />").addClass("jtable-column-header-text").html(c.title),e=a("<div />").addClass("jtable-column-header-container").append(d),f=a("<th></th>").addClass("jtable-column-header").addClass(c.listClass).css("width",c.width).data("fieldName",b).append(e);return this._jqueryuiThemeAddClass(f,"ui-state-default"),f},_createEmptyCommandHeader:function(){var b=a("<th></th>").addClass("jtable-command-column-header").css("width","1%");return this._jqueryuiThemeAddClass(b,"ui-state-default"),b},_createTableBody:function(){this._$tableBody=a("<tbody></tbody>").appendTo(this._$table)},_createBusyPanel:function(){this._$busyMessageDiv=a("<div />").addClass("jtable-busy-message").prependTo(this._$mainContainer),this._$busyDiv=a("<div />").addClass("jtable-busy-panel-background").prependTo(this._$mainContainer),this._jqueryuiThemeAddClass(this._$busyMessageDiv,"ui-widget-header"),this._hideBusy()},load:function(a,b){this._lastPostData=a,this._reloadTable(b)},reload:function(a){this._reloadTable(a)},getRowByKey:function(a){for(var b=0;b<this._$tableRows.length;b++)if(a==this._getKeyValueOfRecord(this._$tableRows[b].data("record")))return this._$tableRows[b];return null},destroy:function(){this.element.empty(),a.Widget.prototype.destroy.call(this)},_setOption:function(){},_reloadTable:function(a){var b=this;b._showBusy(b.options.messages.loadingMessage,b.options.loadingAnimationDelay);var c=b._createRecordLoadUrl();b._onLoadingRecords(),b._ajax({url:c,data:b._lastPostData,success:function(c){return b._hideBusy(),"OK"!=c.Result?(b._showError(c.Message),void 0):(b._removeAllRows("reloading"),b._addRecordsToTable(c.Records),b._onRecordsLoaded(c),a&&a(),void 0)},error:function(){b._hideBusy(),b._showError(b.options.messages.serverCommunicationError)}})},_createRecordLoadUrl:function(){return this.options.actions.listAction},_createRowFromRecord:function(b){var c=a("<tr></tr>").addClass("jtable-data-row").attr("data-record-key",this._getKeyValueOfRecord(b)).data("record",b);return this._addCellsToRowUsingRecord(c),c},_addCellsToRowUsingRecord:function(a){for(var b=a.data("record"),c=0;c<this._columnList.length;c++)this._createCellForRecordField(b,this._columnList[c]).appendTo(a)},_createCellForRecordField:function(b,c){return a("<td></td>").addClass(this.options.fields[c].listClass).append(this._getDisplayTextForRecordField(b,c))},_addRecordsToTable:function(b){var c=this;a.each(b,function(a,b){c._addRow(c._createRowFromRecord(b))}),c._refreshRowStyles()},_addRowToTable:function(a,b,c,d){var e={index:this._normalizeNumber(b,0,this._$tableRows.length,this._$tableRows.length)};1==c&&(e.isNewRow=!0),0==d&&(e.animationsEnabled=!1),this._addRow(a,e)},_addRow:function(b,c){c=a.extend({index:this._$tableRows.length,isNewRow:!1,animationsEnabled:!0},c),this._$tableRows.length<=0&&this._removeNoDataRow(),c.index=this._normalizeNumber(c.index,0,this._$tableRows.length,this._$tableRows.length),c.index==this._$tableRows.length?(this._$tableBody.append(b),this._$tableRows.push(b)):0==c.index?(this._$tableBody.prepend(b),this._$tableRows.unshift(b)):(this._$tableRows[c.index-1].after(b),this._$tableRows.splice(c.index,0,b)),this._onRowInserted(b,c.isNewRow),c.isNewRow&&(this._refreshRowStyles(),this.options.animationsEnabled&&c.animationsEnabled&&this._showNewRowAnimation(b))},_showNewRowAnimation:function(a){var b="jtable-row-created";this.options.jqueryuiTheme&&(b+=" ui-state-highlight"),a.addClass(b,"slow","",function(){a.removeClass(b,5e3)})},_removeRowsFromTable:function(b,c){var d=this;b.length<=0||(b.addClass("jtable-row-removed").remove(),b.each(function(){var b=d._findRowIndex(a(this));b>=0&&d._$tableRows.splice(b,1)}),d._onRowsRemoved(b,c),0==d._$tableRows.length&&d._addNoDataRow(),d._refreshRowStyles())},_findRowIndex:function(a){return this._findIndexInArray(a,this._$tableRows,function(a,b){return a.data("record")==b.data("record")})},_removeAllRows:function(a){if(!(this._$tableRows.length<=0)){var b=this._$tableBody.find("tr.jtable-data-row");this._$tableBody.empty(),this._$tableRows=[],this._onRowsRemoved(b,a),this._addNoDataRow()}},_addNoDataRow:function(){if(!(this._$tableBody.find(">tr.jtable-no-data-row").length>0)){var b=a("<tr></tr>").addClass("jtable-no-data-row").appendTo(this._$tableBody),c=this._$table.find("thead th").length;a("<td></td>").attr("colspan",c).html(this.options.messages.noDataAvailable).appendTo(b)}},_removeNoDataRow:function(){this._$tableBody.find(".jtable-no-data-row").remove()},_refreshRowStyles:function(){for(var a=0;a<this._$tableRows.length;a++)0==a%2?this._$tableRows[a].addClass("jtable-row-even"):this._$tableRows[a].removeClass("jtable-row-even")},_getDisplayTextForRecordField:function(a,b){var c=this.options.fields[b],d=a[b];if(c.display)return c.display({record:a});if("date"==c.type)return this._getDisplayTextForDateRecordField(c,d);if("checkbox"==c.type)return this._getCheckBoxTextForFieldByValue(b,d);if(c.options){var e=this._getOptionsForField(b,{record:a,value:d,source:"list",dependedValues:this._createDependedValuesUsingRecord(a,c.dependsOn)});return this._findOptionByValue(e,d).DisplayText}return d},_createDependedValuesUsingRecord:function(a,b){if(!b)return{};for(var c={},d=0;d<b.length;d++)c[b[d]]=a[b[d]];return c},_findOptionByValue:function(a,b){for(var c=0;c<a.length;c++)if(a[c].Value==b)return a[c];return{}},_getDisplayTextForDateRecordField:function(b,c){if(!c)return"";var d=b.displayFormat||this.options.defaultDateFormat,e=this._parseDate(c);return a.datepicker.formatDate(d,e)},_getOptionsForField:function(b,c){var d=this.options.fields[b],e=d.options;a.isFunction(e)&&(c=a.extend(!0,{_cacheCleared:!1,dependedValues:{},clearCache:function(){this._cacheCleared=!0}},c),e=e(c));var f;if("string"==typeof e){var g="options_"+b+"_"+e;if(c._cacheCleared||!this._cache[g])this._cache[g]=this._buildOptionsFromArray(this._downloadOptions(b,e)),this._sortFieldOptions(this._cache[g],d.optionsSorting);else if(void 0!=c.value){var h=this._findOptionByValue(this._cache[g],c.value);void 0==h.DisplayText&&(this._cache[g]=this._buildOptionsFromArray(this._downloadOptions(b,e)),this._sortFieldOptions(this._cache[g],d.optionsSorting))}f=this._cache[g]}else jQuery.isArray(e)?(f=this._buildOptionsFromArray(e),this._sortFieldOptions(f,d.optionsSorting)):(f=this._buildOptionsArrayFromObject(e),this._sortFieldOptions(f,d.optionsSorting));return f},_downloadOptions:function(a,b){var c=this,d=[];return c._ajax({url:b,async:!1,success:function(a){return"OK"!=a.Result?(c._showError(a.Message),void 0):(d=a.Options,void 0)},error:function(){var b=c._formatString(c.options.messages.cannotLoadOptionsFor,a);c._showError(b)}}),d},_sortFieldOptions:function(b,c){if(b&&b.length&&c){var d;d=0==c.indexOf("value")?function(a){return a.Value}:function(a){return a.DisplayText};var e;e="string"==a.type(d(b[0]))?function(a,b){return d(a).localeCompare(d(b))}:function(a,b){return d(a)-d(b)},c.indexOf("desc")>0?b.sort(function(a,b){return e(b,a)}):b.sort(function(a,b){return e(a,b)})}},_buildOptionsArrayFromObject:function(b){var c=[];return a.each(b,function(a,b){c.push({Value:a,DisplayText:b})}),c},_buildOptionsFromArray:function(b){for(var c=[],d=0;d<b.length;d++)a.isPlainObject(b[d])?c.push(b[d]):c.push({Value:b[d],DisplayText:b[d]});return c},_parseDate:function(a){return a.indexOf("Date")>=0?new Date(parseInt(a.substr(6),10)):10==a.length?new Date(parseInt(a.substr(0,4),10),parseInt(a.substr(5,2),10)-1,parseInt(a.substr(8,2),10)):19==a.length?new Date(parseInt(a.substr(0,4),10),parseInt(a.substr(5,2),10)-1,parseInt(a.substr(8,2,10)),parseInt(a.substr(11,2),10),parseInt(a.substr(14,2),10),parseInt(a.substr(17,2),10)):(this._logWarn("Given date is not properly formatted: "+a),"format error!")},_createToolBar:function(){this._$toolbarDiv=a("<div />").addClass("jtable-toolbar").appendTo(this._$titleDiv);for(var b=0;b<this.options.toolbar.items.length;b++)this._addToolBarItem(this.options.toolbar.items[b])},_addToolBarItem:function(b){if(void 0==b||void 0==b.text&&void 0==b.icon)return this._logWarn("Can not add tool bar item since it is not valid!"),this._logWarn(b),null;var c=a("<span></span>").addClass("jtable-toolbar-item").appendTo(this._$toolbarDiv);if(this._jqueryuiThemeAddClass(c,"ui-widget ui-state-default ui-corner-all","ui-state-hover"),b.cssClass&&c.addClass(b.cssClass),b.tooltip&&c.attr("title",b.tooltip),b.icon){var d=a('<span class="jtable-toolbar-item-icon"></span>').appendTo(c);b.icon===!0||a.type("string"===b.icon)&&d.css("background",'url("'+b.icon+'")')}b.text&&a('<span class=""></span>').html(b.text).addClass("jtable-toolbar-item-text").appendTo(c),b.click&&c.click(function(){b.click()});var e=void 0,f=void 0;return this.options.toolbar.hoverAnimation&&(e=this.options.toolbar.hoverAnimationDuration,f=this.options.toolbar.hoverAnimationEasing),c.hover(function(){c.addClass("jtable-toolbar-item-hover",e,f)},function(){c.removeClass("jtable-toolbar-item-hover",e,f)}),c},_showError:function(a){void 0!=a&&bootbox.alert(a)},_setBusyTimer:null,_showBusy:function(a,b){var c=this;c._$busyDiv.width(c._$mainContainer.width()).height(c._$mainContainer.height()).addClass("jtable-busy-panel-background-invisible").show();var d=function(){c._$busyDiv.removeClass("jtable-busy-panel-background-invisible"),c._$busyMessageDiv.html(a).show()};if(b){if(c._setBusyTimer)return;c._setBusyTimer=setTimeout(d,b)}else d()},_hideBusy:function(){clearTimeout(this._setBusyTimer),this._setBusyTimer=null,this._$busyDiv.hide(),this._$busyMessageDiv.html("").hide()},_isBusy:function(){return this._$busyMessageDiv.is(":visible")},_jqueryuiThemeAddClass:function(a,b,c){this.options.jqueryuiTheme&&(a.addClass(b),c&&a.hover(function(){a.addClass(c)},function(){a.removeClass(c)}))},_performAjaxCall:function(a,b,c,d,e){this._ajax({url:a,data:b,async:c,success:d,error:e})},_ajax:function(c){var d=a.extend({},this.options.ajaxSettings,c);d.success=function(a){c.success&&c.success(a)},d.error=function(a){return b?(a.abort(),void 0):(c.error&&c.error(arguments),void 0)},d.complete=function(){c.complete&&c.complete()},a.ajax(d)},_getKeyValueOfRecord:function(a){return a[this._keyField]},_setCookie:function(a,b){a=this._cookieKeyPrefix+a;var c=new Date;c.setDate(c.getDate()+30),document.cookie=encodeURIComponent(a)+"="+encodeURIComponent(b)+"; expires="+c.toUTCString()},_getCookie:function(a){a=this._cookieKeyPrefix+a;for(var b=document.cookie.split("; "),c=0;c<b.length;c++)if(b[c]){var d=b[c].split("=");if(2==d.length&&decodeURIComponent(d[0])===a)return decodeURIComponent(d[1]||"")}return null},_generateCookieKeyPrefix:function(){var a=function(a){var b=0;if(0==a.length)return b;for(var c=0;c<a.length;c++){var d=a.charCodeAt(c);b=(b<<5)-b+d,b&=b}return b},b="";return this.options.tableId&&(b=b+this.options.tableId+"#"),b=b+this._columnList.join("$")+"#c"+this._$table.find("thead th").length,"jtable#"+a(b)},_onLoadingRecords:function(){this._trigger("loadingRecords",null,{})},_onRecordsLoaded:function(a){this._trigger("recordsLoaded",null,{records:a.Records,serverResponse:a})},_onRowInserted:function(a,b){this._trigger("rowInserted",null,{row:a,record:a.data("record"),isNewRow:b})},_onRowsRemoved:function(a,b){this._trigger("rowsRemoved",null,{rows:a,reason:b})},_onCloseRequested:function(){this._trigger("closeRequested",null,{})}})}(jQuery),function(a){a.extend(!0,a.hik.jtable.prototype,{_getPropertyOfObject:function(a,b){if(b.indexOf(".")<0)return a[b];var c=b.substring(0,b.indexOf(".")),d=b.substring(b.indexOf(".")+1);return this._getPropertyOfObject(a[c],d)},_setPropertyOfObject:function(a,b,c){if(b.indexOf(".")<0)a[b]=c;else{var d=b.substring(0,b.indexOf(".")),e=b.substring(b.indexOf(".")+1);this._setPropertyOfObject(a[d],e,c)}},_insertToArrayIfDoesNotExists:function(b,c){a.inArray(c,b)<0&&b.push(c)},_findIndexInArray:function(a,b,c){c||(c=function(a,b){return a==b});for(var d=0;d<b.length;d++)if(c(a,b[d]))return d;return-1},_normalizeNumber:function(a,b,c,d){return void 0==a||null==a||isNaN(a)?d:b>a?b:a>c?c:a},_formatString:function(){if(0==arguments.length)return null;for(var a=arguments[0],b=1;b<arguments.length;b++){var c="{"+(b-1)+"}";a=a.replace(c,arguments[b])}return a},_logDebug:function(a){window.console&&console.log("jTable DEBUG: "+a)},_logInfo:function(a){window.console&&console.log("jTable INFO: "+a)},_logWarn:function(a){window.console&&console.log("jTable WARNING: "+a)},_logError:function(a){window.console&&console.log("jTable ERROR: "+a)}}),Array.prototype.indexOf||(Array.prototype.indexOf=function(a){var b=this.length,c=Number(arguments[1])||0;for(c=0>c?Math.ceil(c):Math.floor(c),0>c&&(c+=b);b>c;c++)if(c in this&&this[c]===a)return c;return-1})}(jQuery),function(a){var b={_create:a.hik.jtable.prototype._create,_addColumnsToHeaderRow:a.hik.jtable.prototype._addColumnsToHeaderRow,_addCellsToRowUsingRecord:a.hik.jtable.prototype._addCellsToRowUsingRecord,_onLoadingRecords:a.hik.jtable.prototype._onLoadingRecords,_onRecordsLoaded:a.hik.jtable.prototype._onRecordsLoaded,_onRowsRemoved:a.hik.jtable.prototype._onRowsRemoved};a.extend(!0,a.hik.jtable.prototype,{options:{selecting:!1,multiselect:!1,selectingCheckboxes:!1,selectOnRowClick:!0,selectionChanged:function(){}},_selectedRecordIdsBeforeLoad:null,_$selectAllCheckbox:null,_shiftKeyDown:!1,_create:function(){this.options.selecting&&this.options.selectingCheckboxes&&(++this._firstDataColumnOffset,this._bindKeyboardEvents()),b._create.apply(this,arguments)},_bindKeyboardEvents:function(){var b=this;a(document).keydown(function(a){switch(a.which){case 16:b._shiftKeyDown=!0}}).keyup(function(a){switch(a.which){case 16:b._shiftKeyDown=!1}})},selectedRows:function(){return this._getSelectedRows()},selectRows:function(a){this._selectRows(a),this._onSelectionChanged()},_addColumnsToHeaderRow:function(a){this.options.selecting&&this.options.selectingCheckboxes&&(this.options.multiselect?a.append(this._createSelectAllHeader()):a.append(this._createEmptyCommandHeader())),b._addColumnsToHeaderRow.apply(this,arguments)},_addCellsToRowUsingRecord:function(a){this.options.selecting&&this._makeRowSelectable(a),b._addCellsToRowUsingRecord.apply(this,arguments)},_onLoadingRecords:function(){this.options.selecting&&this._storeSelectionList(),b._onLoadingRecords.apply(this,arguments)},_onRecordsLoaded:function(){this.options.selecting&&this._restoreSelectionList(),b._onRecordsLoaded.apply(this,arguments)},_onRowsRemoved:function(a,c){this.options.selecting&&"reloading"!=c&&a.filter(".jtable-row-selected").length>0&&this._onSelectionChanged(),b._onRowsRemoved.apply(this,arguments)},_createSelectAllHeader:function(){var b=this,c=a('<th class=""></th>').addClass("jtable-command-column-header jtable-column-header-selecting");this._jqueryuiThemeAddClass(c,"ui-state-default");var d=a("<div />").addClass("jtable-column-header-container").appendTo(c);return b._$selectAllCheckbox=a('<input type="checkbox" />').appendTo(d).click(function(){if(b._$tableRows.length<=0)return b._$selectAllCheckbox.attr("checked",!1),void 0;var a=b._$tableBody.find(">tr.jtable-data-row");b._$selectAllCheckbox.is(":checked")?b._selectRows(a):b._deselectRows(a),b._onSelectionChanged()}),c},_storeSelectionList:function(){var b=this;b.options.selecting&&(b._selectedRecordIdsBeforeLoad=[],b._getSelectedRows().each(function(){b._selectedRecordIdsBeforeLoad.push(b._getKeyValueOfRecord(a(this).data("record")))}))},_restoreSelectionList:function(){var b=this;if(b.options.selecting){for(var c=0,d=0;d<b._$tableRows.length;++d){var e=b._getKeyValueOfRecord(b._$tableRows[d].data("record"));a.inArray(e,b._selectedRecordIdsBeforeLoad)>-1&&(b._selectRows(b._$tableRows[d]),++c)}b._selectedRecordIdsBeforeLoad.length>0&&b._selectedRecordIdsBeforeLoad.length!=c&&b._onSelectionChanged(),b._selectedRecordIdsBeforeLoad=[],b._refreshSelectAllCheckboxState()}},_getSelectedRows:function(){return this._$tableBody.find(">tr.jtable-row-selected")},_makeRowSelectable:function(b){var c=this;if(c.options.selectOnRowClick&&b.click(function(){c._invertRowSelection(b)}),c.options.selectingCheckboxes){var d=a("<td></td>").addClass("jtable-selecting-column"),e=a('<input type="checkbox" />').appendTo(d);c.options.selectOnRowClick||e.click(function(){c._invertRowSelection(b)}),b.append(d)}},_invertRowSelection:function(a){if(a.hasClass("jtable-row-selected"))this._deselectRows(a);else if(this._shiftKeyDown){var b=this._findRowIndex(a),c=this._findFirstSelectedRowIndexBeforeIndex(b)+1;if(c>0&&b>c)this._selectRows(this._$tableBody.find("tr").slice(c,b+1));else{var d=this._findFirstSelectedRowIndexAfterIndex(b)-1;d>b?this._selectRows(this._$tableBody.find("tr").slice(b,d+1)):this._selectRows(a)}}else this._selectRows(a);this._onSelectionChanged()},_findFirstSelectedRowIndexBeforeIndex:function(a){for(var b=a-1;b>=0;--b)if(this._$tableRows[b].hasClass("jtable-row-selected"))return b;return-1},_findFirstSelectedRowIndexAfterIndex:function(a){for(var b=a+1;b<this._$tableRows.length;++b)if(this._$tableRows[b].hasClass("jtable-row-selected"))return b;return-1},_selectRows:function(a){this.options.multiselect||this._deselectRows(this._getSelectedRows()),a.addClass("jtable-row-selected"),this._jqueryuiThemeAddClass(a,"ui-state-highlight"),this.options.selectingCheckboxes&&a.find(">td.jtable-selecting-column >input").prop("checked",!0),this._refreshSelectAllCheckboxState()},_deselectRows:function(a){a.removeClass("jtable-row-selected ui-state-highlight"),this.options.selectingCheckboxes&&a.find(">td.jtable-selecting-column >input").prop("checked",!1),this._refreshSelectAllCheckboxState()},_refreshSelectAllCheckboxState:function(){if(this.options.selectingCheckboxes&&this.options.multiselect){var a=this._$tableRows.length,b=this._getSelectedRows().length;0==b?(this._$selectAllCheckbox.prop("indeterminate",!1),this._$selectAllCheckbox.attr("checked",!1)):b==a?(this._$selectAllCheckbox.prop("indeterminate",!1),this._$selectAllCheckbox.attr("checked",!0)):(this._$selectAllCheckbox.attr("checked",!1),this._$selectAllCheckbox.prop("indeterminate",!0))}},_onSelectionChanged:function(){this._trigger("selectionChanged",null,{})}})}(jQuery),function(a){var b={load:a.hik.jtable.prototype.load,_create:a.hik.jtable.prototype._create,_setOption:a.hik.jtable.prototype._setOption,_createRecordLoadUrl:a.hik.jtable.prototype._createRecordLoadUrl,_addRowToTable:a.hik.jtable.prototype._addRowToTable,_addRow:a.hik.jtable.prototype._addRow,_removeRowsFromTable:a.hik.jtable.prototype._removeRowsFromTable,_onRecordsLoaded:a.hik.jtable.prototype._onRecordsLoaded};a.extend(!0,a.hik.jtable.prototype,{options:{paging:!1,pageList:"normal",pageSize:10,pageSizes:[10,25,50,100,250,500],pageSizeChangeArea:!0,gotoPageArea:"combobox",messages:{pagingInfo:"Showing {0}-{1} of {2}",pageSizeChangeLabel:"Row count",gotoPageLabel:"Go to page"}},_$bottomPanel:null,_$pagingListArea:null,_$pageSizeChangeArea:null,_$pageInfoSpan:null,_$gotoPageArea:null,_$gotoPageInput:null,_totalRecordCount:0,_currentPageNo:1,_create:function(){b._create.apply(this,arguments),this.options.paging&&(this._loadPagingSettings(),this._createBottomPanel(),this._createPageListArea(),this._createGotoPageInput(),this._createPageSizeSelection())},_loadPagingSettings:function(){if(this.options.saveUserPreferences){var a=this._getCookie("page-size");a&&(this.options.pageSize=this._normalizeNumber(a,1,1e6,this.options.pageSize))}},_createBottomPanel:function(){this._$bottomPanel=a("<div />").addClass("jtable-bottom-panel").insertAfter(this._$table),this._jqueryuiThemeAddClass(this._$bottomPanel,"ui-state-default"),a("<div />").addClass("jtable-left-area").appendTo(this._$bottomPanel),a("<div />").addClass("jtable-right-area").appendTo(this._$bottomPanel)},_createPageListArea:function(){this._$pagingListArea=a("<span></span>").addClass("jtable-page-list").appendTo(this._$bottomPanel.find(".jtable-left-area")),this._$pageInfoSpan=a("<span></span>").addClass("jtable-page-info").appendTo(this._$bottomPanel.find(".jtable-right-area"))},_createPageSizeSelection:function(){var b=this;if(b.options.pageSizeChangeArea){b._findIndexInArray(b.options.pageSize,b.options.pageSizes)<0&&(b.options.pageSizes.push(parseInt(b.options.pageSize)),b.options.pageSizes.sort(function(a,b){return a-b})),b._$pageSizeChangeArea=a("<span></span>").addClass("jtable-page-size-change").appendTo(b._$bottomPanel.find(".jtable-left-area")),b._$pageSizeChangeArea.append("<span>"+b.options.messages.pageSizeChangeLabel+": </span>");for(var c=a("<select></select>").appendTo(b._$pageSizeChangeArea),d=0;d<b.options.pageSizes.length;d++)c.append('<option value="'+b.options.pageSizes[d]+'">'+b.options.pageSizes[d]+"</option>");c.val(b.options.pageSize),c.change(function(){b._changePageSize(parseInt(a(this).val()))})}},_createGotoPageInput:function(){var b=this;b.options.gotoPageArea&&"none"!=b.options.gotoPageArea&&(this._$gotoPageArea=a("<span></span>").addClass("jtable-goto-page").appendTo(b._$bottomPanel.find(".jtable-left-area")),this._$gotoPageArea.append("<span>"+b.options.messages.gotoPageLabel+": </span>"),"combobox"==b.options.gotoPageArea?(b._$gotoPageInput=a("<select></select>").appendTo(this._$gotoPageArea).data("pageCount",1).change(function(){b._changePage(parseInt(a(this).val()))}),b._$gotoPageInput.append('<option value="1">1</option>')):b._$gotoPageInput=a('<input type="text" maxlength="10" value="'+b._currentPageNo+'" />').appendTo(this._$gotoPageArea).keypress(function(a){if(13==a.which)a.preventDefault(),b._changePage(parseInt(b._$gotoPageInput.val()));else if(43==a.which)a.preventDefault(),b._changePage(parseInt(b._$gotoPageInput.val())+1);else if(45==a.which)a.preventDefault(),b._changePage(parseInt(b._$gotoPageInput.val())-1);else{var c=47<a.keyCode&&a.keyCode<58&&0==a.shiftKey&&0==a.altKey||8==a.keyCode||9==a.keyCode;c||a.preventDefault()}}))},_refreshGotoPageInput:function(){if(this.options.gotoPageArea&&"none"!=this.options.gotoPageArea){if(this._totalRecordCount<=0?this._$gotoPageArea.hide():this._$gotoPageArea.show(),"combobox"==this.options.gotoPageArea){var a=this._$gotoPageInput.data("pageCount"),b=this._calculatePageCount();if(a!=b){this._$gotoPageInput.empty();var c=1;b>1e4?c=100:b>5e3?c=10:b>2e3?c=5:b>1e3&&(c=2);for(var d=c;b>=d;d+=c)this._$gotoPageInput.append('<option value="'+d+'">'+d+"</option>");this._$gotoPageInput.data("pageCount",b)}}this._$gotoPageInput.val(this._currentPageNo)}},load:function(){this._currentPageNo=1,b.load.apply(this,arguments)},_setOption:function(a,c){b._setOption.apply(this,arguments),"pageSize"==a&&this._changePageSize(parseInt(c))},_changePageSize:function(a){if(a!=this.options.pageSize){this.options.pageSize=a;var b=this._calculatePageCount();this._currentPageNo>b&&(this._currentPageNo=b),this._currentPageNo<=0&&(this._currentPageNo=1);var c=this._$bottomPanel.find(".jtable-page-size-change select");if(c.length>0&&parseInt(c.val())!=a){var d=c.find("option[value="+a+"]");d.length>0&&c.val(a)}this._savePagingSettings(),this._reloadTable()}},_savePagingSettings:function(){this.options.saveUserPreferences&&this._setCookie("page-size",this.options.pageSize)},_createRecordLoadUrl:function(){var a=b._createRecordLoadUrl.apply(this,arguments);return a=this._addPagingInfoToUrl(a,this._currentPageNo)},_addRowToTable:function(a,c,d){return d&&this.options.paging?(this._reloadTable(),void 0):(b._addRowToTable.apply(this,arguments),void 0)},_addRow:function(a,c){return c&&c.isNewRow&&this.options.paging?(this._reloadTable(),void 0):(b._addRow.apply(this,arguments),void 0)},_removeRowsFromTable:function(){b._removeRowsFromTable.apply(this,arguments),this.options.paging&&(this._$tableRows.length<=0&&this._currentPageNo>1&&--this._currentPageNo,this._reloadTable())},_onRecordsLoaded:function(a){this.options.paging&&(this._totalRecordCount=a.TotalRecordCount,this._createPagingList(),this._createPagingInfo(),this._refreshGotoPageInput()),b._onRecordsLoaded.apply(this,arguments)},_addPagingInfoToUrl:function(a,b){if(!this.options.paging)return a;var c=(b-1)*this.options.pageSize,d=this.options.pageSize;return a+(a.indexOf("?")<0?"?":"&")+"jtStartIndex="+c+"&jtPageSize="+d},_createPagingList:function(){if(!(this.options.pageSize<=0||(this._$pagingListArea.empty(),this._totalRecordCount<=0))){var a=this._calculatePageCount();this._createFirstAndPreviousPageButtons(),"normal"==this.options.pageList&&this._createPageNumberButtons(this._calculatePageNumbers(a)),this._createLastAndNextPageButtons(a),this._bindClickEventsToPageNumberButtons()}},_createFirstAndPreviousPageButtons:function(){var b=a("<span></span>").addClass("jtable-page-number-first").html("&lt&lt").data("pageNumber",1).appendTo(this._$pagingListArea),c=a("<span></span>").addClass("jtable-page-number-previous").html("&lt").data("pageNumber",this._currentPageNo-1).appendTo(this._$pagingListArea);this._jqueryuiThemeAddClass(b,"ui-button ui-state-default","ui-state-hover"),this._jqueryuiThemeAddClass(c,"ui-button ui-state-default","ui-state-hover"),this._currentPageNo<=1&&(b.addClass("jtable-page-number-disabled"),c.addClass("jtable-page-number-disabled"),this._jqueryuiThemeAddClass(b,"ui-state-disabled"),this._jqueryuiThemeAddClass(c,"ui-state-disabled"))},_createLastAndNextPageButtons:function(b){var c=a("<span></span>").addClass("jtable-page-number-next").html("&gt").data("pageNumber",this._currentPageNo+1).appendTo(this._$pagingListArea),d=a("<span></span>").addClass("jtable-page-number-last").html("&gt&gt").data("pageNumber",b).appendTo(this._$pagingListArea);this._jqueryuiThemeAddClass(c,"ui-button ui-state-default","ui-state-hover"),this._jqueryuiThemeAddClass(d,"ui-button ui-state-default","ui-state-hover"),this._currentPageNo>=b&&(c.addClass("jtable-page-number-disabled"),d.addClass("jtable-page-number-disabled"),this._jqueryuiThemeAddClass(c,"ui-state-disabled"),this._jqueryuiThemeAddClass(d,"ui-state-disabled"))},_createPageNumberButtons:function(b){for(var c=0,d=0;d<b.length;d++)b[d]-c>1&&a("<span></span>").addClass("jtable-page-number-space").html("...").appendTo(this._$pagingListArea),this._createPageNumberButton(b[d]),c=b[d]},_createPageNumberButton:function(b){var c=a("<span></span>").addClass("jtable-page-number").html(b).data("pageNumber",b).appendTo(this._$pagingListArea);this._jqueryuiThemeAddClass(c,"ui-button ui-state-default","ui-state-hover"),this._currentPageNo==b&&(c.addClass("jtable-page-number-active jtable-page-number-disabled"),this._jqueryuiThemeAddClass(c,"ui-state-active"))},_calculatePageCount:function(){var a=Math.floor(this._totalRecordCount/this.options.pageSize);return 0!=this._totalRecordCount%this.options.pageSize&&++a,a},_calculatePageNumbers:function(a){if(4>=a){for(var b=[],c=1;a>=c;++c)b.push(c);return b}var d=[1,2,a-1,a],e=this._normalizeNumber(this._currentPageNo-1,1,a,1),f=this._normalizeNumber(this._currentPageNo+1,1,a,1);return this._insertToArrayIfDoesNotExists(d,e),this._insertToArrayIfDoesNotExists(d,this._currentPageNo),this._insertToArrayIfDoesNotExists(d,f),d.sort(function(a,b){return a-b}),d},_createPagingInfo:function(){if(this._totalRecordCount<=0)return this._$pageInfoSpan.empty(),void 0;var a=(this._currentPageNo-1)*this.options.pageSize+1,b=this._currentPageNo*this.options.pageSize;if(b=this._normalizeNumber(b,a,this._totalRecordCount,0),b>=a){var c=this._formatString(this.options.messages.pagingInfo,a,b,this._totalRecordCount);this._$pageInfoSpan.html(c)}},_bindClickEventsToPageNumberButtons:function(){var b=this;b._$pagingListArea.find(".jtable-page-number,.jtable-page-number-previous,.jtable-page-number-next,.jtable-page-number-first,.jtable-page-number-last").not(".jtable-page-number-disabled").click(function(c){c.preventDefault(),b._changePage(a(this).data("pageNumber"))})},_changePage:function(a){return a=this._normalizeNumber(a,1,this._calculatePageCount(),1),a==this._currentPageNo?(this._refreshGotoPageInput(),void 0):(this._currentPageNo=a,this._reloadTable(),void 0)}})}(jQuery),function(a){var b={_initializeFields:a.hik.jtable.prototype._initializeFields,_normalizeFieldOptions:a.hik.jtable.prototype._normalizeFieldOptions,_createHeaderCellForField:a.hik.jtable.prototype._createHeaderCellForField,_createRecordLoadUrl:a.hik.jtable.prototype._createRecordLoadUrl};a.extend(!0,a.hik.jtable.prototype,{options:{sorting:!1,multiSorting:!1,defaultSorting:""},_lastSorting:null,_initializeFields:function(){b._initializeFields.apply(this,arguments),this._lastSorting=[],this.options.sorting&&this._buildDefaultSortingArray()
},_normalizeFieldOptions:function(a,c){b._normalizeFieldOptions.apply(this,arguments),c.sorting=0!=c.sorting},_createHeaderCellForField:function(a,c){var d=b._createHeaderCellForField.apply(this,arguments);return this.options.sorting&&c.sorting&&this._makeColumnSortable(d,a),d},_createRecordLoadUrl:function(){var a=b._createRecordLoadUrl.apply(this,arguments);return a=this._addSortingInfoToUrl(a)},_buildDefaultSortingArray:function(){var b=this;a.each(b.options.defaultSorting.split(","),function(c,d){a.each(b.options.fields,function(a,c){if(c.sorting){var e=d.indexOf(a);e>-1&&(d.toUpperCase().indexOf(" DESC",e)>-1?b._lastSorting.push({fieldName:a,sortOrder:"DESC"}):b._lastSorting.push({fieldName:a,sortOrder:"ASC"}))}})})},_makeColumnSortable:function(b,c){var d=this;b.addClass("jtable-column-header-sortable").click(function(a){a.preventDefault(),d.options.multiSorting&&a.ctrlKey||(d._lastSorting=[]),d._sortTableByColumn(b)}),a.each(this._lastSorting,function(a,d){d.fieldName==c&&("DESC"==d.sortOrder?b.addClass("jtable-column-header-sorted-desc"):b.addClass("jtable-column-header-sorted-asc"))})},_sortTableByColumn:function(a){0==this._lastSorting.length&&a.siblings().removeClass("jtable-column-header-sorted-asc jtable-column-header-sorted-desc");for(var b=0;b<this._lastSorting.length;b++)this._lastSorting[b].fieldName==a.data("fieldName")&&this._lastSorting.splice(b--,1);a.hasClass("jtable-column-header-sorted-asc")?(a.removeClass("jtable-column-header-sorted-asc").addClass("jtable-column-header-sorted-desc"),this._lastSorting.push({fieldName:a.data("fieldName"),sortOrder:"DESC"})):(a.removeClass("jtable-column-header-sorted-desc").addClass("jtable-column-header-sorted-asc"),this._lastSorting.push({fieldName:a.data("fieldName"),sortOrder:"ASC"})),this._reloadTable()},_addSortingInfoToUrl:function(b){if(!this.options.sorting||0==this._lastSorting.length)return b;var c=[];return a.each(this._lastSorting,function(a,b){c.push(b.fieldName+" "+b.sortOrder)}),b+(b.indexOf("?")<0?"?":"&")+"jtSorting="+c.join(",")}})}(jQuery),function(a){var b={_create:a.hik.jtable.prototype._create,_normalizeFieldOptions:a.hik.jtable.prototype._normalizeFieldOptions,_createHeaderCellForField:a.hik.jtable.prototype._createHeaderCellForField,_createCellForRecordField:a.hik.jtable.prototype._createCellForRecordField};a.extend(!0,a.hik.jtable.prototype,{options:{tableId:void 0,columnResizable:!0,columnSelectable:!0},_$columnSelectionDiv:null,_$columnResizeBar:null,_cookieKeyPrefix:null,_currentResizeArgs:null,_create:function(){b._create.apply(this,arguments),this._createColumnResizeBar(),this._createColumnSelection(),this.options.saveUserPreferences&&this._loadColumnSettings(),this._normalizeColumnWidths()},_normalizeFieldOptions:function(a,c){b._normalizeFieldOptions.apply(this,arguments),this.options.columnResizable&&(c.columnResizable=0!=c.columnResizable),c.visibility||(c.visibility="visible")},_createHeaderCellForField:function(a,c){var d=b._createHeaderCellForField.apply(this,arguments);return this.options.columnResizable&&c.columnResizable&&a!=this._columnList[this._columnList.length-1]&&this._makeColumnResizable(d),"hidden"==c.visibility&&d.hide(),d},_createCellForRecordField:function(a,c){var d=b._createCellForRecordField.apply(this,arguments),e=this.options.fields[c];return"hidden"==e.visibility&&d.hide(),d},changeColumnVisibility:function(a,b){this._changeColumnVisibilityInternal(a,b),this._normalizeColumnWidths(),this.options.saveUserPreferences&&this._saveColumnSettings()},_changeColumnVisibilityInternal:function(a,b){var c=this._columnList.indexOf(a);if(0>c)return this._logWarn('Column "'+a+'" does not exist in fields!'),void 0;if(["visible","hidden","fixed"].indexOf(b)<0)return this._logWarn('Visibility value is not valid: "'+b+'"! Options are: visible, hidden, fixed.'),void 0;var d=this.options.fields[a];if(d.visibility!=b){var e=this._firstDataColumnOffset+c+1;"hidden"!=d.visibility&&"hidden"==b?this._$table.find(">thead >tr >th:nth-child("+e+"),>tbody >tr >td:nth-child("+e+")").hide():"hidden"==d.visibility&&"hidden"!=b&&this._$table.find(">thead >tr >th:nth-child("+e+"),>tbody >tr >td:nth-child("+e+")").show().css("display","table-cell"),d.visibility=b}},_createColumnSelection:function(){var b=this;this._$columnSelectionDiv=a("<div />").addClass("jtable-column-selection-container").appendTo(b._$mainContainer),this._$table.children("thead").bind("contextmenu",function(c){if(b.options.columnSelectable){c.preventDefault(),a("<div />").addClass("jtable-contextmenu-overlay").click(function(){a(this).remove(),b._$columnSelectionDiv.hide()}).bind("contextmenu",function(){return!1}).appendTo(document.body),b._fillColumnSelection();var d=b._$mainContainer.offset(),e=c.pageY-d.top,f=c.pageX-d.left,g=100,h=b._$mainContainer.width();h>g&&f>h-g&&(f=h-g),b._$columnSelectionDiv.css({left:f,top:e,"min-width":g+"px"}).show()}})},_fillColumnSelection:function(){for(var b=this,c=a("<ul></ul>").addClass("jtable-column-select-list"),d=0;d<this._columnList.length;d++){var e=this._columnList[d],f=this.options.fields[e],g=a("<li></li>").appendTo(c),h=a('<label for="'+e+'"></label>').append(a("<span>"+(f.title||e)+"</span>")).appendTo(g),i=a('<input type="checkbox" name="'+e+'">').prependTo(h).click(function(){var c=a(this),d=c.attr("name"),e=b.options.fields[d];"fixed"!=e.visibility&&b.changeColumnVisibility(d,c.is(":checked")?"visible":"hidden")});"hidden"!=f.visibility&&i.attr("checked","checked"),"fixed"==f.visibility&&i.attr("disabled","disabled")}this._$columnSelectionDiv.html(c)},_createColumnResizeBar:function(){this._$columnResizeBar=a("<div />").addClass("jtable-column-resize-bar").appendTo(this._$mainContainer).hide()},_makeColumnResizable:function(b){var c=this;a("<div />").addClass("jtable-column-resize-handler").appendTo(b.find(".jtable-column-header-container")).mousedown(function(d){d.preventDefault(),d.stopPropagation();var e=c._$mainContainer.offset(),f=b.nextAll("th.jtable-column-header:visible:first");if(f.length){var g=10;c._currentResizeArgs={currentColumnStartWidth:b.outerWidth(),minWidth:g,maxWidth:b.outerWidth()+f.outerWidth()-g,mouseStartX:d.pageX,minResizeX:function(){return this.mouseStartX-(this.currentColumnStartWidth-this.minWidth)},maxResizeX:function(){return this.mouseStartX+(this.maxWidth-this.currentColumnStartWidth)}};var h=function(a){if(c._currentResizeArgs){var b=c._normalizeNumber(a.pageX,c._currentResizeArgs.minResizeX(),c._currentResizeArgs.maxResizeX());c._$columnResizeBar.css("left",b-e.left+"px")}},i=function(d){if(c._currentResizeArgs){a(document).unbind("mousemove",h),a(document).unbind("mouseup",i),c._$columnResizeBar.hide();var e=d.pageX-c._currentResizeArgs.mouseStartX,g=c._normalizeNumber(c._currentResizeArgs.currentColumnStartWidth+e,c._currentResizeArgs.minWidth,c._currentResizeArgs.maxWidth),j=f.outerWidth()+(c._currentResizeArgs.currentColumnStartWidth-g),k=b.data("width-in-percent")/c._currentResizeArgs.currentColumnStartWidth;b.data("width-in-percent",g*k),f.data("width-in-percent",j*k),b.css("width",b.data("width-in-percent")+"%"),f.css("width",f.data("width-in-percent")+"%"),c._normalizeColumnWidths(),c._currentResizeArgs=null,c.options.saveUserPreferences&&c._saveColumnSettings()}};c._$columnResizeBar.show().css({top:b.offset().top-e.top+"px",left:d.pageX-e.left+"px",height:c._$table.outerHeight()+"px"}),a(document).bind("mousemove",h),a(document).bind("mouseup",i)}})},_normalizeColumnWidths:function(){var b=this._$table.find(">thead th.jtable-command-column-header").data("width-in-percent",1).css("width","1%"),c=this._$table.find(">thead th.jtable-column-header"),d=0;c.each(function(){var b=a(this);b.is(":visible")&&(d+=b.outerWidth())});var e={},f=100-b.length;c.each(function(){var b=a(this);if(b.is(":visible")){var c=b.data("fieldName"),g=b.outerWidth()*f/d;e[c]=g}}),c.each(function(){var b=a(this);if(b.is(":visible")){var c=b.data("fieldName");b.data("width-in-percent",e[c]).css("width",e[c]+"%")}})},_saveColumnSettings:function(){var b=this,c="";this._$table.find(">thead >tr >th.jtable-column-header").each(function(){var d=a(this),e=d.data("fieldName"),f=d.data("width-in-percent"),g=b.options.fields[e].visibility,h=e+"="+g+";"+f;c=c+h+"|"}),this._setCookie("column-settings",c.substr(0,c.length-1))},_loadColumnSettings:function(){var b=this,c=this._getCookie("column-settings");if(c){var d={};a.each(c.split("|"),function(a,b){var c=b.split("="),e=c[0],f=c[1].split(";");d[e]={columnVisibility:f[0],columnWidth:f[1]}});var e=this._$table.find(">thead >tr >th.jtable-column-header");e.each(function(){var c=a(this),e=c.data("fieldName"),f=b.options.fields[e];d[e]&&("fixed"!=f.visibility&&b._changeColumnVisibilityInternal(e,d[e].columnVisibility),c.data("width-in-percent",d[e].columnWidth).css("width",d[e].columnWidth+"%"))})}}})}(jQuery),function(a){var b={_removeRowsFromTable:a.hik.jtable.prototype._removeRowsFromTable};a.extend(!0,a.hik.jtable.prototype,{options:{openChildAsAccordion:!1},openChildTable:function(b,c,d){var e=this;void 0==c.jqueryuiTheme&&(c.jqueryuiTheme=e.options.jqueryuiTheme),c.showCloseButton=0!=c.showCloseButton,c.showCloseButton&&!c.closeRequested&&(c.closeRequested=function(){e.closeChildTable(b)}),e.options.openChildAsAccordion&&b.siblings(".jtable-data-row").each(function(){e.closeChildTable(a(this))}),e.closeChildTable(b,function(){var f=e.getChildRow(b).children("td").empty(),g=a("<div />").addClass("jtable-child-table-container").appendTo(f);f.data("childTable",g),g.jtable(c),e.openChildRow(b),g.hide().slideDown("fast",function(){d&&d({childTable:g})})})},closeChildTable:function(a,b){var c=this,d=this.getChildRow(a).children("td"),e=d.data("childTable");return e?(d.data("childTable",null),e.slideUp("fast",function(){e.jtable("destroy"),e.remove(),c.closeChildRow(a),b&&b()}),void 0):(b&&b(),void 0)},isChildRowOpen:function(a){return this.getChildRow(a).is(":visible")},getChildRow:function(a){return a.data("childRow")||this._createChildRow(a)},openChildRow:function(a){var b=this.getChildRow(a);return b.is(":visible")||b.show(),b},closeChildRow:function(a){var b=this.getChildRow(a);b.is(":visible")&&b.hide()},_removeRowsFromTable:function(c,d){"deleted"==d&&c.each(function(){var b=a(this),c=b.data("childRow");c&&c.remove()}),b._removeRowsFromTable.apply(this,arguments)},_createChildRow:function(b){var c=this._$table.find("thead th").length,d=a("<tr></tr>").addClass("jtable-child-row").append('<td colspan="'+c+'"></td>');return b.after(d),b.data("childRow",d),d.hide(),d}})}(jQuery);
