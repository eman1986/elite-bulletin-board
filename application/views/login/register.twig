{% extends "master.twig" %}

{% block title %}{{boardName}} - {{LANG_REGISTER}}{% endblock %}

{% block bodyRender %}

{{BREADCRUMB|raw}}<br />


{%if PREF_RULES == 1%}
    <script type="text/javascript">
	bootbox.alert("{{RULES}}", '{{LANG_AGREE}}');
    </script>
{%endif%}

<script type="text/javascript" src="{{BOARD_URL}}js/pwdTester.js"></script>
<script type="text/javascript">
//$(document).ready(function(){
	//$('#password').keyup(function() {
	$(document).on("keyup", '#password', function() {
		var howStrong = passwordStrength($(this).val());
		$('.strength-text', $(this).next()).text(howStrong);
		var sColor = '#555';
		switch(howStrong) {
			case 'Strong':
				$('.password-strength', $(this).next()).css('background-color', '#006600');
			break;
			case 'Medium':
				$('.password-strength', $(this).next()).css('background-color', '#009900');
			break;
			case 'Weak':
				$('.password-strength', $(this).next()).css('background-color', '#CC9900');
			break;
			case 'Short':
				$('.password-strength', $(this).next()).css('background-color', '#FF0000');
			break;
			default :
				$('.password-strength', $(this).next()).css('background-color', '#555');
			break;
		}
	}).focusout( function() {
		$(this).trigger('keyup');
	});
//});
</script>

<div class="row">
	<div class="span5 offset6">
		<div class="well">
			<!-- validation box. -->
			<div class="hideElement alert alert-error" id="div_ErrMsg" style="width: 60%;">
				<strong>{{LANG_ERROR}}: </strong><br />
				<span id="validateRes"></span>
			</div>
			<legend>{{LANG_REGISTER}}</legend>	
			{{REGISTERFORM|raw}}
				<div class="control-group">
					<div class="controls">
						<span class="text-error">{{VALIDATION_EMAIL}}</span>
						<label class="control-label" for="email">{{LANG_EMAIL}}</label>
						<input type="text" name="email" id="email" />
					</div>
				</div>
				<div class="control-group">
					<div class="controls">
						<span class="text-error">{{VALIDATION_USERNAME}}</span>
						<label class="control-label" for="username">{{LANG_USERNAME}}</label>
						<input type="text" name="username" id="username" />
						<span class="help-inline">{{LANG_RULE}}</span>
					</div>
				</div>
				<div class="control-group">
					<div class="controls">
						<span class="text-error">{{VALIDATION_PASSWORD}}</span>
						<label class="control-label" for="password">{{LANG_PASSWORD}}</label>
						<input type="password" name="password" id="password" />
						<span class="help-inline">
							<div class="PwdStrengthBox"><span class="password-strength"></span> <span class="strength-text">Type Password</span></div>
						</span>
					</div>
				</div>
				<div class="control-group">
					<div class="controls">
						<span class="text-error">{{VALIDATION_LANGUAGE}}</span>
						<label class="control-label" for="language">{{LANG_LANGUAGE}}</label>
						{{LANGUAGE|raw}}
					</div>
				</div>
				{%if PREF_CAPTCHA == 1%}
				<div class="control-group">
					<div class="controls">
						<span class="text-error">{{VALIDATION_CAPTCHA}}</span>
						<label class="control-label" for="captcha">{{LANG_CAPTCHA}} <strong>{{CAPTCHA}}</strong></label>
						<input type="text" name="captcha" maxlength="2" id="captcha" />
					</div>
				</div>
				{%endif%}
				{%if PREF_COPPA == 13 or PREF_COPPA == 16 or PREF_COPPA == 18 or PREF_COPPA == 21%}
				<div class="control-group">
					<div class="controls">
						<span class="text-error">{{VALIDATION_CAPTCHA}}</span>
						<label class="checkbox">
							<input type="checkbox" name="coppavalid" id="coppavalid" value="yes" />
							{%if PREF_COPPA == 13%}
								<strong>{{COPPA_13}}</strong>
							{%elseif PREF_COPPA == 16%}
								<strong>{{COPPA_16}}</strong>
							{%elseif PREF_COPPA == 18%}
								<strong>{{COPPA_18}}</strong>
							{%elseif PREF_COPPA == 21%}
								<strong>{{COPPA_21}}</strong>
							{%endif%}
						</label>
					</div>
				</div>
				{%endif%}
				<button class="btn-primary btn icon-user"  type="submit"> {{LANG_REGISTER}}</button>
				<button class="btn-primary btn icon-signin" onclick="gotoUrl('{{BOARD_URL}}{{INDEX_PAGE}}/login');return false;"> {{LANG_LOGIN}}</button>
			</form>    
		</div>
	</div>
</div>
<script type="text/javascript">
$('#email').focus();
new FormValidator('frmRegister', [{
    name: 'username',
    display: '{{LANG_USERNAME}}',
    rules: 'required|alpha_numeric'
}, {
    name: 'password',
	display: '{{LANG_PASSWORD}}',
    rules: 'required'
}, {
    name: 'email',
	display: '{{LANG_EMAIL}}',
    rules: 'required|valid_email'
},
{% if PREF_COPPA == 13 or PREF_COPPA == 16 or PREF_COPPA == 18 or PREF_COPPA == 21 %}
{
    name: 'coppavalid',
    display: '{{LANG_COPPA}}',
    rules: 'required'
},
{% endif %}
{%if PREF_CAPTCHA == 1%}
{
    name: 'captcha',
    display: '{{LANG_CAPTCHA}}',
    rules: 'required|numeric'
},
{% endif %}
{
    name: 'email',
	display: '{{LANG_EMAIL}}',
    rules: 'required|valid_email'
}
], function(errors, event) {

    if (errors.length > 0) {
        $('#validateRes').empty();
        $('#validateRes').append(errors.join('<br />'));
        $('#div_ErrMsg').show();
    } else {
        event.returnValue = true; //allow form to process.
    }
    
});
</script>

{% endblock %}
